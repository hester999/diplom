events {}

http {
    include mime.types;
    default_type application/octet-stream;

    server {
        listen 80;

        # ✅ Главная страница
        location / {
            root /app/templates;  # Указываем путь к index.html
            index index.html;
        }

        # ✅ Проксирование API для SQL-инъекций
        location /sql-injection/ {
            proxy_pass http://sql-injection:5000/sql-injection/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }

        # ✅ Раздача статики для SQL-инъекций
        location /sql-injection/static/ {
            root /app/SQL;  # Статика для SQL-инъекций
            autoindex on;
            expires max;
        }

        # ✅ Перенаправление глобальных статических файлов для SQL-инъекций
        location /static/ {
            # Если запрос идет из SQL-инъекций, используем /app/SQL/static
            alias /app/SQL/static/;
            expires 6M;
            access_log off;
            add_header Cache-Control "public, max-age=31536000, immutable";
        }

        # ✅ Раздача статики для XSS
        location /xss/static/ {
            root /app/xss/static;  # Статика для XSS
            autoindex on;
            expires max;
        }

        # ✅ Раздача статики для CSRF
        location /csrf/static/ {
            root /app/csrf/static;  # Статика для CSRF
            autoindex on;
            expires max;
        }

        # ✅ Раздача статики для File Upload
        location /file-upload/static/ {
            root /app/file-upload/static;  # Статика для File Upload
            autoindex on;
            expires max;
        }
    }
}